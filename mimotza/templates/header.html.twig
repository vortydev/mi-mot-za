{% block header %}
<header>

    <h1 class="headerTitle">Mi-Mot-Za</h1>
    
    {% if app.user %}
        <a class="connexionBtn deconnexion" href="http://localhost:8000/logout">Déconnexion</a>
    {% else %}
        <a class="connexionBtn connexion" href="http://localhost:8000/login">Connexion</a>
    {% endif %}

    {% if app.user.getId() is defined %}
    <script>

        function redirectToLogout() {
            window.location.href = 'http://localhost:8000/logout';
        }

        deconnButton = document.getElementsByClassName("deconnexion")[0];

        deconnButton.addEventListener("click", function(event) {
            event.preventDefault();

            sendEvent({{app.user.getId()}}, 3, "L'utilisateur {{app.user.getUsername()}} s'est déconnecté le [date]");
            const myTimeout = setTimeout(redirectToLogout, 5000);
        });
    </script>
    {% endif %}
</header>
<nav>
    <ul class="flexnav">
        <li><a href="http://localhost:8000/">Accueil</a></li>
        <li><a href="http://localhost:8000/user">Joueurs</a></li>
        <li><a href="http://localhost:8000/GestionDuJeu">Jeu</a></li>
        <li><a href="http://localhost:8000/message">Messages</a></li>
    </ul>
</nav>
{% endblock %}